syntax = "proto3";

package rooms_service;

// Il servizio deve permettere al client di:
// 1. ricevere aggiornamenti in real-time delle stanze
// 2. creare una nuova stanza
// 3. entrare/uscire da una stanza
// 4. conoscere il numero di partecipanti di una stanza

service RoomsServiceInterface
{
	// Stream continuo di aggiornamenti in real-time delle stanze.
	rpc WatchRooms(WatchRoomsRequest) returns (stream RoomList) {}
 	// Il client manda una singola richiesta al server per ottenere la lista di tutte le stanze esistenti
 	rpc ListAllRooms(ListRoomsRequest) returns (RoomList) {}
  
  
	// Crea una nuova stanza
  // rpc CreateRoom(CreateRoomRequest) returns (CreateRoomResponse) {}
  // Entra in una stanza
  // rpc JoinRoom(JoinRoomRequest) returns (JoinRoomResponse) {}
  // Esce da una stanza
  // rpc LeaveRoom(LeaveRoomRequest) returns (LeaveRoomResponse) {}
}

message WatchRoomsRequest 
{
  uint32 client_id = 1;
}
message RoomInfo
{
	string room_name = 1;
	uint32 room_id = 2;
	uint32 user_count = 3;
}
message RoomList 
{
  repeated RoomInfo rooms = 1;
}

message ListRoomsRequest {}


// message CreateRoomRequest
// {
//   string name = 1;
// }
// 
// message CreateRoomResponse
// {
//   bool success = 1;
//   string room_id = 2;
//   string error = 3;
// }
// 
// message JoinRoomRequest
// {
//   string client_id = 1;
//   string room_id = 2;
// }
// 
// message JoinRoomResponse
// {
//   bool success = 1;
//   string error = 2;
// }
// 
// message LeaveRoomRequest
// {
//   string client_id = 1;
//   string room_id = 2;
// }
// 
// message LeaveRoomResponse 
// {
//   bool success = 1;
//   string error = 2;
// }